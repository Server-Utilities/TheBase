plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

group = 'com.github.server-utilities'

repositories {
    mavenCentral()
    mavenLocal()

    // JitPack
    maven { url 'https://jitpack.io' }
}

dependencies {
    compileOnly 'org.projectlombok:lombok:1.18.30'
    shadow 'org.projectlombok:lombok:1.18.30'
    annotationProcessor 'org.projectlombok:lombok:1.18.30'

    implementation 'com.github.simplix-softworks:simplixstorage:3.2.7'
    shadow 'com.github.simplix-softworks:simplixstorage:3.2.7'

    implementation 'com.google.guava:guava:33.0.0-jre'
    shadow 'com.google.guava:guava:33.0.0-jre'

    implementation 'com.google.code.gson:gson:2.10.1'
    shadow 'com.google.code.gson:gson:2.10.1'

    implementation 'mysql:mysql-connector-java:8.0.33'
    shadow 'mysql:mysql-connector-java:8.0.33'

    implementation 'org.xerial:sqlite-jdbc:3.45.1.0'
    shadow 'org.xerial:sqlite-jdbc:3.45.1.0'

    implementation 'com.zaxxer:HikariCP:5.1.0'
    shadow 'com.zaxxer:HikariCP:5.1.0'

    implementation 'net.objecthunter:exp4j:0.4.8'
    shadow 'net.objecthunter:exp4j:0.4.8'

    implementation 'com.google.re2j:re2j:1.7'
    shadow 'com.google.re2j:re2j:1.7'
}

shadowJar {
    relocate('de.leonhard', 'tv.quaint.thebase.lib.leonhard')
    relocate('com.mysql', 'tv.quaint.thebase.lib.mysql')
    relocate('com.zaxxer.hikari', 'tv.quaint.thebase.lib.hikari')
    relocate('net.objecthunter.exp4j', 'tv.quaint.thebase.lib.exp4j')
    relocate('com.google.re2j', 'tv.quaint.thebase.lib.re2j')
    relocate('com.google.common', 'tv.quaint.thebase.lib.google.common')
    relocate('com.google.gson', 'tv.quaint.thebase.lib.google.gson')

    archiveFileName = project.name + '-' + project.version + '.jar'
}

artifacts {
    archives shadowJar
}

wrapper {
    gradleVersion = '8.6'
    distributionType = Wrapper.DistributionType.BIN
}